System.register("chunks:///_virtual/AppManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VideoCamera.ts"],(function(e){"use strict";var t,a,n,i,r,o,s,c,p,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Node,c=e.view,p=e.macro,u=e.Component},function(e){l=e.default}],execute:function(){var d,f,h,m,v;r._RF.push({},"75348tPWIlDzr3PoY+ONjZ9","AppManager",void 0);var g=o.ccclass,y=o.property;e("AppManager",(d=g("AppManager"),f=y({type:s}),d((v=t((m=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"UICanvas",v,i(t)),t.mVideoCamera=new l,t}a(t,e);var r=t.prototype;return r.start=function(){c.setOrientation(p.ORIENTATION_PORTRAIT),c.setResizeCallback(this.OnSizeChanged.bind(this))},r.update=function(e){},r.Playing=function(){var e=this;this.mVideoCamera.Setup("user").then((function(t){e.mVideoCamera.Play()})),this.UICanvas.active=!1},r.OnSizeChanged=function(){this.mVideoCamera.Resize()},t}(u)).prototype,"UICanvas",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=m))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/DeviceManger.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"8aa13qxf8NPSbMyilaC6flY","DeviceManger",void 0);e("DeviceManager",function(){function e(){this.localMediaStream=void 0,this.camera={available:!1,permissionGranted:!1,error:{message:null,name:null}},this.microphone={available:!1,permissionGranted:!1,error:{message:null,name:null}}}var r=e.prototype;return r.identifyDevices=function(){navigator.mediaDevices.enumerateDevices().then((function(e){return console.log({devices:e})})).catch((function(e){return console.error("couldnt get constraints")}))},r.requestCamera=function(){var e=this;navigator.mediaDevices.getUserMedia({video:!0}).then((function(r){if(e.camera.permissionGranted=!0,e.camera.error=null,e.localMediaStream){var a=r.getVideoTracks()[0];e.localMediaStream.addTrack(a),r.getTracks().forEach((function(e){return e.stop()}))}else e.localMediaStream=r})).catch((function(r){e.camera.error.message=r.message,e.camera.error.name=r.name,console.error("no camera",e.camera.error)}))},r.requestMicrophone=function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(r){if(e.microphone.permissionGranted=!0,e.microphone.error=null,e.localMediaStream){var a=r.getAudioTracks()[0];e.localMediaStream.addTrack(a),r.getTracks().forEach((function(e){return e.stop()}))}else e.localMediaStream=r})).catch((function(r){e.microphone.error.message=r.message,e.microphone.error.name=r.name,console.error("no mic",e.microphone.error)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/KagarooController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,r,a,s,l,u,c,h,p,y,v,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Camera,l=e.Node,u=e.animation,c=e.input,h=e.Input,p=e.KeyCode,y=e.PhysicsSystem,v=e.Vec3,f=e.geometry,g=e.Component}],execute:function(){var d,m,b,C,E,M,P,_,w,U,K,N,D;r._RF.push({},"48620PnKRFFB6jQjEJujCIK","KagarooController",void 0);var T=a.ccclass,z=a.property;e("KagarooController",(d=T("KagarooController"),m=z({type:s}),b=z({type:l}),C=z({type:l}),E=z({type:l}),M=z({type:Number}),d((w=t((_=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"mainCamera",w,n(t)),i(t,"sphere",U,n(t)),i(t,"targetNode",K,n(t)),i(t,"kangarooNode",N,n(t)),t._ray=new f.Ray,t.animationController=void 0,i(t,"velocity",D,n(t)),t.isMouve=!1,t}o(t,e);var r=t.prototype;return r.start=function(){this.animationController=this.kangarooNode.getComponent(u.AnimationController),console.log("create event")},r.onEnable=function(){c.on(h.EventType.KEY_DOWN,this.onMove,this),c.on(h.EventType.KEY_UP,this.onUp,this),c.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this),c.on(h.EventType.MOUSE_UP,this.onMouseUp,this)},r.onDisable=function(){c.off(h.EventType.KEY_DOWN,this.onMove,this),c.off(h.EventType.KEY_UP,this.onUp,this),c.off(h.EventType.MOUSE_DOWN,this.onMouseDown,this),c.off(h.EventType.MOUSE_UP,this.onMouseUp,this)},r.update=function(e){if(this.isMouve){var t;t=this.node.getPosition();var o=this.node.forward;o.multiplyScalar(this.velocity*e),t.add(o),this.node.setPosition(t),Math.abs(this.node.getPosition().x-this.sphere.getPosition().x)<.05&&(this.isMouve=!1,this.animationController.setValue("velocity",0))}},r.onMove=function(e){switch(e.keyCode){case p.KEY_A:this.animationController.setValue("velocity",1),console.log("Press button A")}},r.onUp=function(e){switch(e.keyCode){case p.KEY_A:this.animationController.setValue("velocity",0),console.log("Press button A")}},r.onMouseDown=function(e){},r.onMouseUp=function(e){var t=e.getLocation();if(this.mainCamera.screenPointToRay(t.x,t.y,this._ray),y.instance.raycast(this._ray))for(var o=y.instance.raycastResults,i=0;i<o.length;i++){var n=o[i];if(n.collider.node=this.targetNode){var r=new v(n.hitPoint.x,n.hitPoint.y,n.hitPoint.z);this.sphere.setPosition(r),this.node.lookAt(r,this.node.up),this.isMouve=!0,this.animationController.setValue("velocity",1)}}},t}(g)).prototype,"mainCamera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(_.prototype,"sphere",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(_.prototype,"targetNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(_.prototype,"kangarooNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(_.prototype,"velocity",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),P=_))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AppManager.ts","./DeviceManger.ts","./KagarooController.ts","./VideoCamera.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/VideoCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,s;return{setters:[function(e){t=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"8a6d3RI+ZlJ+b+ao4hjAdQd","VideoCamera",void 0);e("default",function(){function e(){this.video=void 0,this.stream=void 0}var s=e.prototype;return s.Setup=function(){var e=t(i().mark((function e(t){var s,n,r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t="environment"),this.faceMode=t,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=4;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 4:return s=document.getElementById("video"),n={audio:!1,video:{facingMode:t,width:{ideal:640},height:{ideal:480}}},this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()})),e.next=9,navigator.mediaDevices.getUserMedia(n);case 9:return this.stream=e.sent,s.srcObject=null,s.srcObject=this.stream,s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","playsinline"),s.setAttribute("muted",""),s.style.width="640px",s.style.height="480px",s.style.display="none",s.style.transform="user"==t?"scale(-1, 1)":"scale(1, 1)",e.abrupt("return",new Promise((function(e,t){r.video=s,s.onloadedmetadata=function(){r.Resize(),e(s)}})));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.Play=function(e){void 0===e&&(e=!1),null!=this.video&&(this.video.play(),this.video.style.display=e?"none":"block")},s.Stop=function(e){(null!=this.video&&(this.video.pause(),this.video.style.display="none"),e)&&(this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()})))},s.Resize=function(){if(this.video){var e=window.innerWidth,t=window.innerHeight,i=this.video.videoWidth/this.video.videoHeight;if(e/t<i){var s=i*t;this.video.style.width=s+"px",this.video.style.marginLeft=-(s-e)/2+"px",this.video.style.height=t+"px",this.video.style.marginTop="0px"}else{var n=1/(i/e);this.video.style.height=n+"px",this.video.style.marginTop=-(n-t)/2+"px",this.video.style.width=e+"px",this.video.style.marginLeft="0px"}}},e}());s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});